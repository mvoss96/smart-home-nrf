2023-07-03 11:48:42 INFO   SmartHome:14 - NRF-Smart-Home started
2023-07-03 11:48:42 INFO   DBManager:49 - Read UUID: [182, 68, 225, 237]
2023-07-03 11:48:42 INFO   device:48 - initialize NRF24USB Device with channel: 101 address: 0 ...
2023-07-03 11:48:44 INFO   device:61 - Firmware version: 1 Serial: 85:83:F7:7E
2023-07-03 11:48:44 INFO   device:70 - Device initialized successfully!
2023-07-03 11:48:44 INFO   CommunicationManager:167 - poll device [184, 102, 162, 212]
2023-07-03 11:48:44 INFO   _internal:187 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.2.137:5000
2023-07-03 11:48:44 INFO   _internal:187 - [33mPress CTRL+C to quit[0m
2023-07-03 11:48:46 INFO   _internal:187 - 127.0.0.1 - - [03/Jul/2023 11:48:46] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 11:48:46 INFO   _internal:187 - 127.0.0.1 - - [03/Jul/2023 11:48:46] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 11:48:49 INFO   CommunicationManager:167 - poll device [184, 102, 162, 212]
2023-07-03 11:48:54 INFO   CommunicationManager:167 - poll device [184, 102, 162, 212]
2023-07-03 11:48:59 INFO   CommunicationManager:167 - poll device [184, 102, 162, 212]
2023-07-03 11:49:04 INFO   CommunicationManager:167 - poll device [184, 102, 162, 212]
2023-07-03 11:49:09 INFO   CommunicationManager:167 - poll device [184, 102, 162, 212]
2023-07-03 11:49:14 INFO   CommunicationManager:167 - poll device [184, 102, 162, 212]
2023-07-03 11:49:19 INFO   CommunicationManager:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:00 INFO   SmartHome.py:14 - NRF-Smart-Home started
2023-07-03 11:50:00 INFO   DBManager.py:49 - Read UUID: [182, 68, 225, 237]
2023-07-03 11:50:00 INFO   device.py:48 - initialize NRF24USB Device with channel: 101 address: 0 ...
2023-07-03 11:50:02 INFO   device.py:61 - Firmware version: 1 Serial: 85:83:F7:7E
2023-07-03 11:50:02 INFO   device.py:70 - Device initialized successfully!
2023-07-03 11:50:03 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:03 INFO   _internal.py:187 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.2.137:5000
2023-07-03 11:50:03 INFO   _internal.py:187 - [33mPress CTRL+C to quit[0m
2023-07-03 11:50:08 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:13 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:18 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:22 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:50:22] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 11:50:22 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:50:22] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 11:50:23 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:28 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:33 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:38 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:43 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:48 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:53 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:50:58 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:03 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:08 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:13 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:18 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:23 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:28 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:33 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:38 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:43 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:48 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:53 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:51:55 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:51:55] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 11:51:55 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:51:55] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 11:51:58 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:03 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:08 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:13 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:18 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:23 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:28 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:33 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:38 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:43 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:48 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:53 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:52:58 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:53:01 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:53:01] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 11:53:01 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:53:01] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 11:53:03 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:57:11 INFO   SmartHome.py:15 - NRF-Smart-Home started
2023-07-03 11:57:11 INFO   DBManager.py:49 - Read UUID: [182, 68, 225, 237]
2023-07-03 11:57:11 INFO   device.py:48 - initialize NRF24USB Device with channel: 101 address: 0 ...
2023-07-03 11:57:13 INFO   device.py:61 - Firmware version: 1 Serial: 85:83:F7:7E
2023-07-03 11:57:13 INFO   device.py:70 - Device initialized successfully!
2023-07-03 11:57:14 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:57:14 INFO   _internal.py:187 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.2.137:5000
2023-07-03 11:57:14 INFO   _internal.py:187 - [33mPress CTRL+C to quit[0m
2023-07-03 11:57:19 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:57:24 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:57:29 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:57:29 ERROR  SmartHome.py:27 - write failed: [Errno 5] Input/output error
Traceback (most recent call last):
  File "/home/pi/.local/lib/python3.11/site-packages/serial/serialposix.py", line 621, in write
    n = os.write(self.fd, d)
        ^^^^^^^^^^^^^^^^^^^^
OSError: [Errno 5] Input/output error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/smart-home-nrf/SmartHome.py", line 25, in wrapper
    target()
  File "/home/pi/smart-home-nrf/CommunicationManager.py", line 148, in update_all_devices
    self.poll_device(uuid)
  File "/home/pi/smart-home-nrf/CommunicationManager.py", line 170, in poll_device
    if self.device_manager.send_msg_to_device(device["id"], msg.get_raw()) != None:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/smart-home-nrf/DeviceManager.py", line 35, in send_msg_to_device
    return self.device.send_msg(device_id, raw_msg, require_ack)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/smart-home-nrf/nrf24USB/device.py", line 86, in send_msg
    self.send_packet(bytes([destination, require_ack]) + bytes(data), MSG_TYPES.MSG)
  File "/home/pi/smart-home-nrf/nrf24USB/device.py", line 74, in send_packet
    self.serial_port.write(bytes([SpecialBytes.START_BYTE]))  # Write the start byte
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/.local/lib/python3.11/site-packages/serial/serialposix.py", line 655, in write
    raise SerialException('write failed: {}'.format(e))
serial.serialutil.SerialException: write failed: [Errno 5] Input/output error
2023-07-03 11:58:38 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:58:38] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 11:58:38 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:58:38] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 11:59:11 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:59:11] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 11:59:11 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:59:11] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 11:59:30 INFO   SmartHome.py:15 - NRF-Smart-Home started
2023-07-03 11:59:30 INFO   DBManager.py:49 - Read UUID: [182, 68, 225, 237]
2023-07-03 11:59:30 INFO   device.py:48 - initialize NRF24USB Device with channel: 101 address: 0 ...
2023-07-03 11:59:32 INFO   device.py:61 - Firmware version: 1 Serial: 85:83:F7:7E
2023-07-03 11:59:32 INFO   device.py:70 - Device initialized successfully!
2023-07-03 11:59:32 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:59:32 INFO   _internal.py:187 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.2.137:5000
2023-07-03 11:59:32 INFO   _internal.py:187 - [33mPress CTRL+C to quit[0m
2023-07-03 11:59:37 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:59:42 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:59:47 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 11:59:59 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:59:59] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 11:59:59 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 11:59:59] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 12:00:03 INFO   WebServerManager.py:146 - set parameter: power to new_val: on
2023-07-03 12:00:03 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 12:00:03] "PUT /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 12:00:38 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 12:00:38] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 12:00:38 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 12:00:38] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 12:00:38 INFO   WebServerManager.py:146 - set parameter: power to new_val: off
2023-07-03 12:00:38 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 12:00:38] "PUT /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 12:00:41 INFO   WebServerManager.py:146 - set parameter: power to new_val: on
2023-07-03 12:00:41 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 12:00:41] "PUT /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 12:00:45 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 12:00:45] "GET /devices/184-102-162-212/power HTTP/1.1" 200 -
2023-07-03 12:00:45 INFO   _internal.py:187 - 127.0.0.1 - - [03/Jul/2023 12:00:45] "GET /devices/184-102-162-212/brightness HTTP/1.1" 200 -
2023-07-03 12:01:05 INFO   SmartHome.py:15 - NRF-Smart-Home started
2023-07-03 12:01:05 INFO   DBManager.py:49 - Read UUID: [182, 68, 225, 237]
2023-07-03 12:01:05 INFO   device.py:48 - initialize NRF24USB Device with channel: 101 address: 0 ...
2023-07-03 12:01:07 INFO   device.py:61 - Firmware version: 1 Serial: 85:83:F7:7E
2023-07-03 12:01:07 INFO   device.py:70 - Device initialized successfully!
2023-07-03 12:01:07 INFO   CommunicationManager.py:107 - sending SET power on to device [184, 102, 162, 212]
2023-07-03 12:01:07 INFO   _internal.py:187 - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.2.137:5000
2023-07-03 12:01:07 INFO   _internal.py:187 - [33mPress CTRL+C to quit[0m
2023-07-03 12:01:07 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:08 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:13 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:18 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:23 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:28 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:33 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:38 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:43 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:48 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:53 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:01:58 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:03 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:08 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:13 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:18 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:23 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:28 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:33 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:38 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:43 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:48 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:53 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:02:58 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:03 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:08 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:13 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:18 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:23 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:28 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:33 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:38 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:43 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:48 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:53 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:03:58 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:03 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:08 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:13 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:18 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:23 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:28 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:33 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:38 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:43 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:48 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:53 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:04:58 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:05:03 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:05:08 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:05:13 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
2023-07-03 12:05:18 INFO   CommunicationManager.py:167 - poll device [184, 102, 162, 212]
